package palilemmatizingserver;


import java.io.*;
import java.util.*;

import de.general.log.*;
import de.general.util.*;
import de.general.cfg.*;



/**
 * This class is meant to read all configuration values from the configuration file and maintain it within variables
 */
public class AppConfiguration
{

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Constants
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Variables
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	ILogInterface defaultStdOutLogger;
	IConfigurationLoader cfgLoder;

	int port;
	String[] allowedIPAddresses;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Constructors
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	public AppConfiguration(IConfigurationLoader cfgLoder, ILogInterface defaultStdOutLogger)
	{
		this.defaultStdOutLogger = defaultStdOutLogger;
		this.cfgLoder = cfgLoder;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	// Methods
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	public void load() throws Exception
	{
		AbstractConfigurationReader r = cfgLoder.loadConfiguration(defaultStdOutLogger);

		// extract configuration data

		port = r.getPortE("Server", "serverPort");
		allowedIPAddresses = r.getStringList("Server", "allowedIPAddresses");
	}

	public String[] getAllowedIPAddresses()
	{
		return allowedIPAddresses;
	}

	public int getPort()
	{
		return port;
	}

}
